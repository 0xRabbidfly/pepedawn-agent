{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Fake Rares Card Response Message Schema",
  "description": "Schema for /f command responses with hidden URLs",
  "version": "2.0.0",
  "definitions": {
    "CardResponseMessage": {
      "type": "object",
      "description": "Message sent via ElizaOS callback for card display",
      "required": ["text"],
      "properties": {
        "text": {
          "type": "string",
          "description": "Message caption with card metadata (NO URL)",
          "pattern": "^(?!.*https?://).*$",
          "examples": [
            "FAKEMONA ğŸ¸ Series 1 - Card 42\\nğŸ‘¨â€ğŸ¨ Artist Name â€¢ ğŸ’ 5,000 â€¢ ğŸ“… September 2021\\n\\n"
          ]
        },
        "buttons": {
          "type": "array",
          "description": "Optional inline keyboard buttons",
          "items": {
            "$ref": "#/definitions/InlineButton"
          },
          "maxItems": 5
        },
        "__fromAction": {
          "type": "string",
          "const": "fakeRaresCard",
          "description": "Action identifier for ElizaOS routing"
        },
        "suppressBootstrap": {
          "type": "boolean",
          "const": true,
          "description": "Prevents ElizaOS from generating additional responses"
        }
      }
    },
    "InlineButton": {
      "type": "object",
      "required": ["text", "url"],
      "properties": {
        "text": {
          "type": "string",
          "description": "Button display text",
          "examples": ["ğŸ‘¨â€ğŸ¨ Artist Name"]
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "External link URL (artist profile, etc.)"
        }
      }
    },
    "CardMetadata": {
      "type": "object",
      "description": "Card information structure from data index",
      "required": ["asset", "series", "card", "ext"],
      "properties": {
        "asset": {
          "type": "string",
          "description": "Card name identifier",
          "examples": ["FAKEMONA", "RARESCRILLA"]
        },
        "series": {
          "type": "integer",
          "minimum": 0,
          "maximum": 18,
          "description": "Series number"
        },
        "card": {
          "type": "integer",
          "minimum": 1,
          "maximum": 50,
          "description": "Card number within series"
        },
        "ext": {
          "type": "string",
          "enum": ["jpg", "jpeg", "png", "gif", "mp4", "webp"],
          "description": "Asset file extension"
        },
        "artist": {
          "type": ["string", "null"],
          "description": "Artist name"
        },
        "artistSlug": {
          "type": ["string", "null"],
          "description": "Artist URL slug"
        },
        "supply": {
          "type": ["integer", "null"],
          "description": "Card supply count"
        },
        "issuance": {
          "type": ["string", "null"],
          "description": "Release date or period",
          "examples": ["September 2021", "March 2022"]
        },
        "videoUri": {
          "type": ["string", "null"],
          "format": "uri",
          "description": "Direct video URL (used internally, not displayed)"
        },
        "imageUri": {
          "type": ["string", "null"],
          "format": "uri",
          "description": "Direct image URL (used internally, not displayed)"
        }
      }
    }
  },
  "examples": [
    {
      "description": "Image card response (URL hidden)",
      "value": {
        "text": "FAKEMONA ğŸ¸ Series 1 - Card 42\\nğŸ‘¨â€ğŸ¨ Artist Name â€¢ ğŸ’ 5,000 â€¢ ğŸ“… September 2021\\n\\n",
        "buttons": [
          {
            "text": "ğŸ‘¨â€ğŸ¨ Artist Name",
            "url": "https://pepe.wtf/artists/artist-slug"
          }
        ],
        "__fromAction": "fakeRaresCard",
        "suppressBootstrap": true
      }
    },
    {
      "description": "Video card response (URL hidden)",
      "value": {
        "text": "RAREANIM ğŸ¸ Series 5 - Card 12\\nğŸ‘¨â€ğŸ¨ Video Creator â€¢ ğŸ’ 1,000\\n\\n",
        "buttons": [
          {
            "text": "ğŸ‘¨â€ğŸ¨ Video Creator",
            "url": "https://pepe.wtf/artists/creator-slug"
          }
        ],
        "__fromAction": "fakeRaresCard",
        "suppressBootstrap": true
      }
    },
    {
      "description": "Fallback text-only response (preview failed)",
      "value": {
        "text": "BROKENCARD ğŸ¸ Series 3 - Card 8\\nğŸ‘¨â€ğŸ¨ Artist â€¢ ğŸ’ 2,500\\n\\n",
        "buttons": [],
        "__fromAction": "fakeRaresCard",
        "suppressBootstrap": true
      }
    }
  ],
  "validation": {
    "rules": [
      {
        "rule": "text_no_url",
        "description": "Message text must NOT contain any URL (http:// or https://)",
        "regex": "^(?!.*https?://).*$",
        "severity": "error"
      },
      {
        "rule": "text_not_empty",
        "description": "Message text must not be empty",
        "minLength": 10,
        "severity": "error"
      },
      {
        "rule": "telegram_length_limit",
        "description": "Message text must be within Telegram limits",
        "maxLength": 4096,
        "severity": "error"
      }
    ]
  }
}

